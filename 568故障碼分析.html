<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»æ¢¯æ•…éšœI/Oç‹€æ…‹åˆ†æç³»çµ± - PU568 OBM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .fault-input-section {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }
        
        .section-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .fault-input-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        .input-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 14px;
        }
        
        .input-group input, .input-group select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .hex-input {
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            background: #f8f9fa;
        }
        
        .button-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn.btn-success {
            background: linear-gradient(45deg, #27ae60, #229954);
        }
        
        .btn.btn-warning {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }
        
        .btn.btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        .results-section {
            padding: 30px;
            display: none;
        }
        
        .fault-overview {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .fault-overview h3 {
            color: #856404;
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .fault-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .detail-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f39c12;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .detail-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }
        
        .io-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .io-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid #e9ecef;
        }
        
        .io-section h4 {
            background: linear-gradient(45deg, #34495e, #2c3e50);
            color: white;
            padding: 18px 25px;
            margin: 0;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .io-content {
            padding: 25px;
        }
        
        .signal-group {
            margin-bottom: 25px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .signal-group-header {
            background: #f8f9fa;
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
            font-weight: bold;
            color: #495057;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .signal-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 6px;
            padding: 15px;
            background: white;
        }
        
        .signal-bit {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: 600;
            font-size: 10px;
            padding: 4px;
            text-align: center;
            line-height: 1.1;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .signal-bit:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .signal-bit.active {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }
        
        .signal-bit.inactive {
            background: #ecf0f1;
            color: #7f8c8d;
            border-color: #bdc3c7;
        }
        
        .signal-bit.critical.active {
            background: #8e44ad;
            border-color: #7d3c98;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(142, 68, 173, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(142, 68, 173, 0); }
            100% { box-shadow: 0 0 0 0 rgba(142, 68, 173, 0); }
        }
        
        .signal-description {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .critical-signals {
            background: #ffebee;
            border: 2px solid #ffcdd2;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .critical-signals h5 {
            color: #c62828;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .critical-list {
            list-style: none;
            padding: 0;
        }
        
        .critical-list li {
            background: white;
            margin: 8px 0;
            padding: 12px 15px;
            border-radius: 6px;
            border-left: 4px solid #e74c3c;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ok { background: #27ae60; }
        .status-warning { background: #f39c12; }
        .status-error { background: #e74c3c; }
        
        .enhancement-section {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .enhancement-section h5 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .maintenance-advice ol {
            padding-left: 20px;
        }
        
        .maintenance-advice li {
            margin: 8px 0;
            line-height: 1.5;
            color: #495057;
        }
        
        .real-time-monitor {
            background: white;
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.1);
        }
        
        .real-time-monitor h4 {
            color: #3498db;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .rt-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .rt-signal {
            border: 2px solid #d0d7de;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 600;
            padding: 8px 4px;
            text-align: center;
            background: #f6f8fa;
            color: #57606a;
            transition: all 0.3s ease;
            line-height: 1.2;
            cursor: pointer;
        }
        
        .rt-signal.on {
            background: #16a34a;
            color: white;
            border-color: #15803d;
            box-shadow: 0 0 10px rgba(22, 163, 74, 0.3);
        }
        
        .rt-signal.off {
            background: #eceff1;
            color: #6b7280;
            border-color: #d1d5db;
        }
        
        .rt-signal.critical.on {
            background: #dc2626;
            border-color: #b91c1c;
            animation: pulse 2s infinite;
        }
        
        .monitor-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            margin-bottom: 5px;
        }
        
        .tooltip:hover::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #333;
            z-index: 1000;
        }
        
        @media (max-width: 768px) {
            .fault-input-container {
                grid-template-columns: 1fr;
            }
            
            .io-analysis {
                grid-template-columns: 1fr;
            }
            
            .signal-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .rt-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .button-container {
                justify-content: stretch;
            }
            
            .btn {
                flex: 1;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” é›»æ¢¯æ•…éšœI/Oç‹€æ…‹åˆ†æç³»çµ±</h1>
            <p>PU568 OBM æ•…éšœä»£ç¢¼è©³ç´°åˆ†æ - åŸºæ–¼ERR&lt;00.0&gt;ä¿¡è™Ÿè¡¨</p>
        </div>
        
        <div class="fault-input-section">
            <h3 class="section-title">ğŸ“ æ•…éšœä¿¡æ¯è¼¸å…¥</h3>
            <div class="fault-input-container">
                <div class="input-group">
                    <label>æ•…éšœæ—¥æœŸ (DD/MM/YY)</label>
                    <input type="text" id="faultDate" placeholder="01/00/00" maxlength="8">
                </div>
                <div class="input-group">
                    <label>æ•…éšœæ™‚é–“ (HH:MM)</label>
                    <input type="text" id="faultTime" placeholder="10:24" maxlength="5">
                </div>
                <div class="input-group">
                    <label>æ•…éšœç¢¼</label>
                    <select id="faultCode">
                        <option value="10">10 - PGå¢æ¸›æ–¹å‘ä¸å°</option>
                        <option value="11">11 - é›»æ¢¯æºœè»Š</option>
                        <option value="12">12 - è®Šé »å™¨ZSDæœªé€å‡º</option>
                        <option value="13">13 - è®Šé »å™¨æ•…éšœ</option>
                        <option value="14">14 - (ä¿ç•™)</option>
                        <option value="15">15 - INSSã€KNORåŒæ™‚å‹•ä½œæˆ–æœªé€²</option>
                        <option value="16">16 - åšéAH</option>
                        <option value="17">17 - ç™¼ç”Ÿéåœ°éœ‡</option>
                        <option value="18">18 - ç™¼ç”Ÿéç«ç½æˆ–æ¶ˆé˜²é‹è½‰</option>
                        <option value="19">19 - 24Vé›»æºå–ªå¤±</option>
                        <option value="1A">1A - ç™¼ç”Ÿéç·Šæ€¥é›»æºé‹è½‰</option>
                        <option value="1B">1B - ACVFé–€ï¼ŒDERR1å‹•ä½œ</option>
                        <option value="1C">1C - è®Šé »å™¨UA/DAåŒæ™‚æ”¶åˆ°</option>
                        <option value="1D">1D - æ¸›é€Ÿæ™‚é–“è¶…æ™‚</option>
                        <option value="20">20 - LS3å‹•ä½œ</option>
                        <option value="21">21 - LS4å‹•ä½œ</option>
                        <option value="22">22 - é›»æ¢¯åœ¨æœ€ä¸‹éšï¼ŒLS5æ²’é€²</option>
                        <option value="23">23 - é›»æ¢¯åœ¨æœ€ä¸Šéšï¼ŒLS6æ²’é€²</option>
                        <option value="24">24 - CCRã€A4ã€A10ã€A11ã€TA12ã€P24ã€PAKæ²’é€²</option>
                        <option value="25">25 - é–‹é–€å¤±æ•—>=3æ¬¡</option>
                        <option value="26">26 - é–‹é–€å¤±æ•—ï¼Œ18DSæ²’é€²</option>
                        <option value="27">27 - é—œé–€å¤±æ•—>=3æ¬¡</option>
                        <option value="28">28 - é—œé–€å¤±æ•—ï¼ŒDCRæ²’é€²</option>
                        <option value="29">29 - DCRã€HDCå‹•ä½œä¸ä¸€è‡´</option>
                        <option value="2A">2A - é›»æ¢¯5så…§ï¼Œç§»å‹•è·é›¢<600 pulse</option>
                        <option value="2B">2B - é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œè¶…é3æ¬¡æ²’è£œæ­£</option>
                        <option value="2C" selected>2C - é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œè£œéé ­ï¼Œè£œæ­£é€Ÿåº¦å¤ªå¿«</option>
                        <option value="2D">2D - é‹è½‰ä¸­CPLDçš„C2CCXï¼ŒC2SMRæ²’é€²</option>
                        <option value="2E">2E - é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œå‹•ä½œæ™‚é–“éé•·</option>
                        <option value="2F">2F - CPFå‹•ä½œ</option>
                        <option value="31">31 - è®Šé »å™¨éé›»æµï¼ŒReset 3æ¬¡</option>
                        <option value="32">32 - è®Šé »å™¨éé›»å£“ï¼ŒReset 3æ¬¡</option>
                        <option value="33">33 - è®Šé »å™¨éè¼‰</option>
                        <option value="34">34 - è®Šé »å™¨éç†±</option>
                        <option value="35">35 - è¶…é€Ÿ</option>
                        <option value="36">36 - DC BUSä½é›»å£“æª¢å‡º</option>
                        <option value="37">37 - å›ç”Ÿé›»é˜»éç†±</option>
                        <option value="38">38 - è®Šé »å™¨å¤–éƒ¨æ•…éšœ</option>
                        <option value="39">39 - è®Šé »å™¨ä¸»æ©Ÿæ¿ä¸è‰¯</option>
                        <option value="3A">3A - é¦¬é”éè¼‰ï¼ŒReset 3æ¬¡</option>
                        <option value="3B">3B - IGBTæå£</option>
                        <option value="3C">3C - æ¬ ç›¸</option>
                        <option value="3D">3D - é€Ÿåº¦åå·®éå¤§</option>
                        <option value="3E">3E - PGæ–·ç·š</option>
                        <option value="41">41 - 12Vé›»æºå–ªå¤±</option>
                        <option value="42">42 - 12Vé›»æºç¢ºç«‹</option>
                        <option value="43">43 - è½é ‚æ¿é€šè¨Šç•°å¸¸</option>
                        <option value="44">44 - HIDé€šè¨Šç•°å¸¸</option>
                        <option value="45">45 - HCAN Reset</option>
                        <option value="46">46 - KCAN Reset</option>
                        <option value="47">47 - å•Ÿå‹•æ–¹å‘è¢«è®Šé »å™¨åˆ‡æ–·</option>
                        <option value="59">59 - è®Šé »å™¨39æ•…éšœ</option>
                        <option value="A0">A0 - è®Šé »å™¨FHMéŒ¯èª¤</option>
                        <option value="A1">A1 - è®Šé »å™¨SDO CAN BUSç•°å¸¸</option>
                        <option value="A2">A2 - watchDOg</option>
                        <option value="A3">A3 - (ä¿ç•™)</option>
                        <option value="A4">A4 - åƒæ•¸è¨­å®šCheck SuméŒ¯èª¤</option>
                        <option value="A5">A5 - åƒæ•¸æ¨“å±¤éŒ¯èª¤</option>
                        <option value="A6">A6 - PUç´¯åŠ CPLDæ•¸å€¼é‹ç®—éŒ¯èª¤</option>
                        <option value="A7">A7 - CPLDç´¯åŠ PUæ•¸å€¼é‹ç®—éŒ¯èª¤</option>
                        <option value="A8">A8 - è®Šé »å™¨SDO CANé€šè¨ŠTimeout</option>
                        <option value="A9">A9 - PRå€¼å¤ªå°</option>
                        <option value="AA">AA - RTCéŒ¯èª¤</option>
                        <option value="AB">AB - TimeréŒ¯èª¤</option>
                        <option value="AC">AC - è®Šé »å™¨IDéŒ¯èª¤</option>
                        <option value="AD">AD - è®Šé »å™¨èˆ‡PUæ¨“å±¤ä¸åŒ</option>
                        <option value="B1">B1 - DZNã€LSAã€LSBé‚è¼¯éŒ¯èª¤</option>
                        <option value="B2">B2 - MTHå‹•ä½œ</option>
                        <option value="B3">B3 - åœè»ŠPGèª¤å·®è¶…é200mm</option>
                        <option value="B4">B4 - å•Ÿå‹•PGèª¤å·®è¶…é20mm</option>
                        <option value="BE">BE - é‹è½‰ä¸­ï¼ŒPGè®ŠåŒ–é‡éå°</option>
                        <option value="BF">BF - åœè»ŠPGè®ŠåŒ–>107mm</option>
                        <option value="C4">C4 - è®Šé »å™¨PDO CAN BUS timeout</option>
                        <option value="C5">C5 - é‹è½‰ä¸­ï¼ŒDCR off 3æ¬¡</option>
                        <option value="C6">C6 - è®Šé »å™¨é‹è½‰ä¸­ï¼ŒRUN & RDYæ²’é€å‡º</option>
                        <option value="C7">C7 - é›™å‡ºå…¥å£ï¼Œå‰å¾Œé–€åŒæ™‚æ‰“é–‹</option>
                        <option value="C8">C8 - é›™å‡ºå…¥å£ï¼Œé–‹éŒ¯é–€</option>
                        <option value="C9">C9 - é‹è½‰ä¸­ï¼ŒHDC off 3æ¬¡</option>
                        <option value="CA">CA - è®Šé »é–€æ©Ÿï¼ŒDERR2</option>
                        <option value="CE">CE - AMC1å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(0.3S)</option>
                        <option value="CF">CF - AMC2å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(0.3S)</option>
                        <option value="D2">D2 - LS5ï¼ŒLS6å‹•ä½œï¼Œç³»çµ±ä¸æ˜¯åœ¨çµ‚ç«¯æ¨“</option>
                        <option value="D8">D8 - é›»æ¢¯é€Ÿåº¦>æ¸›é€Ÿé–‹é—œä¸‹é™</option>
                        <option value="D9">D9 - é›»æ¢¯é€Ÿåº¦>1XL/ZXLæ¥µé™é–‹é—œé€Ÿåº¦</option>
                        <option value="DA">DA - é›»æ¢¯é€Ÿåº¦>æ¥µé™é–‹é—œè¨­å®šé€Ÿåº¦</option>
                        <option value="DB">DB - AMC1å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(2S)</option>
                        <option value="DC">DC - AMC2å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(2S)</option>
                        <option value="E0">E0 - æ‹‰æ¨“å¹³>3æ¬¡</option>
                        <option value="E3">E3 - DCRã€HDCã€18DSé‚è¼¯éŒ¯èª¤</option>
                        <option value="E4">E4 - é›»æ¢¯é€Ÿåº¦>è¨­å®šä¸Šé™</option>
                        <option value="E5">E5 - BKXï¼ŒBKXSå‹•ä½œä¸ä¸€è‡´</option>
                        <option value="E6">E6 - Slip</option>
                        <option value="E7">E7 - é›»æ¢¯BKå‹•ä½œèˆ‡BLS2å‹•ä½œä¸ä¸€è‡´</option>
                        <option value="E8">E8 - é›»æ¢¯BKå‹•ä½œèˆ‡BLS1å‹•ä½œä¸ä¸€è‡´</option>
                        <option value="E9">E9 - æ¨“å¹³é–‹é—œç•°å¸¸</option>
                        <option value="ED">ED - é‹è½‰ä¸­ï¼ŒPGè®ŠåŒ–é‡ç›¸å</option>
                        <option value="EE">EE - Door ZoneäºŒé‡åŒ–éŒ¯èª¤</option>
                        <option value="EF">EF - DCRäºŒé‡åŒ–éŒ¯èª¤</option>
                        <option value="F0">F0 - è®Šé »å™¨è¼¸å‡ºèˆ‡PUå‘½ä»¤ä¸ä¸€è‡´</option>
                        <option value="F1">F1 - æºœè»Šï¼Œè»Šå»‚åœåœ¨æœ€é ‚æ¨“</option>
                        <option value="F2">F2 - PGå€¼è¶…å‡ºæœ€ä½æœ€é«˜æ¨“å±¤</option>
                        <option value="F3">F3 - è®Šé »å™¨PDO CAN BUS timeout>3æ¬¡</option>
                        <option value="F5">F5 - è®Šé »å™¨é€£çºŒæ•…éšœè¶…é3æ¬¡</option>
                        <option value="F6">F6 - invBKæˆ–InvZSDç•°å¸¸</option>
                        <option value="F7">F7 - æ‹‰ä¸åˆ°æ¨“å¹³ï¼Œé›»æ¢¯å·²åˆ°é ‚æ¨“</option>
                        <option value="F8">F8 - UCMPæ¸¬è©¦ç•°å¸¸</option>
                        <option value="F9">F9 - "1C"æ•…éšœ>3æ¬¡</option>
                        <option value="FA">FA - 2Aæ•…éšœ>3æ¬¡</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>PG Pulseå€¼</label>
                    <input type="text" id="pgPulse" placeholder="00010000" maxlength="8" class="hex-input">
                </div>
                <div class="input-group">
                    <label>ç›®å‰æ¨“å±¤</label>
                    <input type="number" id="currentFloor" placeholder="01" min="0" max="64">
                </div>
                <div class="input-group">
                    <label>ç›®æ¨™æ¨“å±¤</label>
                    <input type="number" id="targetFloor" placeholder="03" min="0" max="64">
                </div>
            </div>
            
            <h4 class="section-title">ğŸ”Œ I/Oä¿¡è™Ÿç‹€æ…‹ (16é€²åˆ¶æ ¼å¼)</h4>
            <div class="fault-input-container">
                <div class="input-group">
                    <label>ERR&lt;00.1&gt; Inputä¿¡è™Ÿ (in0~in10)</label>
                    <input type="text" id="inputSignals" placeholder="D7,82,31,FE,BE,30,70,0A,B1,33,53" class="hex-input">
                </div>
                <div class="input-group">
                    <label>ERR&lt;00.2&gt; Outputä¿¡è™Ÿ (out0~out10)</label>
                    <input type="text" id="outputSignals" placeholder="24,3B,4B,4D,68,C5,2C,11,91,C2,003" class="hex-input">
                </div>
                <div class="input-group">
                    <label>ERR&lt;00.3&gt; InFlagä¿¡è™Ÿ (inflag0~inflag10)</label>
                    <input type="text" id="inflagSignals" placeholder="4D,68,C5,2C,11,91,C2,73,72,02,51" class="hex-input">
                </div>
                <div class="input-group">
                    <label>ERR&lt;00.4&gt; ç³»çµ±ç‹€æ…‹</label>
                    <input type="text" id="systemStatus" placeholder="00000000:0000,00,0000,00,00,00" class="hex-input">
                </div>
            </div>
            
            <div class="button-container">
                <button class="btn" onclick="analyzeFault()">
                    ğŸ” åŸºæœ¬åˆ†æ
                </button>
                <button class="btn btn-success" onclick="enhancedAnalyzeFault()">
                    ğŸš€ å¢å¼·åˆ†æ
                </button>
                <button class="btn btn-warning" onclick="startRealTimeMonitoring()">
                    ğŸ“¡ å¯¦æ™‚ç›£æ§
                </button>
                <button class="btn btn-danger" onclick="generateFaultReport()">
                    ğŸ“„ ç”Ÿæˆå ±å‘Š
                </button>
            </div>
        </div>
        
        <div class="results-section" id="resultsSection">
            <div class="fault-overview" id="faultOverview">
                <!-- æ•…éšœæ¦‚è¦½å°‡åœ¨é€™è£¡é¡¯ç¤º -->
            </div>
            
            <div class="io-analysis" id="ioAnalysis">
                <!-- I/Oåˆ†æçµæœå°‡åœ¨é€™è£¡é¡¯ç¤º -->
            </div>
        </div>
    </div>

    <script>
        // å®Œæ•´æ•…éšœç¢¼èªªæ˜å°ç…§è¡¨
        const faultCodeDescriptions = {
            '10': { desc: 'PGå¢æ¸›æ–¹å‘ä¸å°', level: 'critical', action: 'æª¢æŸ¥PGç·¨ç¢¼å™¨æ¥ç·šåŠè¨­å®šï¼Œç¢ºèªUPæ™‚PGå¢åŠ ï¼ŒDNæ™‚PGæ¸›å°‘' },
            '11': { desc: 'é›»æ¢¯æºœè»Š', level: 'critical', action: 'ç«‹å³æª¢æŸ¥ç…è»Šç³»çµ±ï¼Œç¢ºèªBLS1/BLS2ç…è»Šæª¢çŸ¥é–‹é—œ' },
            '12': { desc: 'è®Šé »å™¨ZSDæœªé€å‡º', level: 'warning', action: 'æª¢æŸ¥è®Šé »å™¨é›¶é€Ÿä¿¡è™Ÿï¼Œç¢ºèªè®Šé »å™¨åœæ­¢å¾Œ0.5så…§é€å‡ºZSD' },
            '13': { desc: 'è®Šé »å™¨æ•…éšœ', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨Readyä¿¡è™Ÿï¼Œç¢ºèªè®Šé »å™¨é›»æºåŠåƒæ•¸è¨­å®š' },
            '14': { desc: '(ä¿ç•™)', level: 'info', action: 'ä¿ç•™æ•…éšœç¢¼' },
            '15': { desc: 'INSSã€KNORåŒæ™‚å‹•ä½œæˆ–æœªé€²', level: 'warning', action: 'æª¢æŸ¥æª¢ä¿®é–‹é—œåŠé«˜é€Ÿé–‹é—œç‹€æ…‹' },
            '16': { desc: 'åšéAH', level: 'info', action: 'é›»æ¢¯åŸ·è¡Œéè‡ªå‹•å›æ­¸åŸºæº–æ¨“é‹è½‰' },
            '17': { desc: 'ç™¼ç”Ÿéåœ°éœ‡', level: 'warning', action: 'æª¢æŸ¥åœ°éœ‡æ„Ÿæ‡‰å™¨åŠåœ°éœ‡ç®¡åˆ¶ç³»çµ±' },
            '18': { desc: 'ç™¼ç”Ÿéç«ç½æˆ–æ¶ˆé˜²é‹è½‰', level: 'warning', action: 'æª¢æŸ¥ç«ç½å—ä¿¡åŠæ¶ˆé˜²é‹è½‰ç³»çµ±' },
            '19': { desc: '24Vé›»æºå–ªå¤±', level: 'critical', action: 'æª¢æŸ¥24Vé›»æºä¾›æ‡‰ç³»çµ±' },
            '1A': { desc: 'ç™¼ç”Ÿéç·Šæ€¥é›»æºé‹è½‰', level: 'warning', action: 'æª¢æŸ¥UPSæˆ–ç·Šæ€¥é›»æºç³»çµ±' },
            '1B': { desc: 'ACVFé–€ï¼ŒDERR1å‹•ä½œ', level: 'warning', action: 'æª¢æŸ¥ACVFé–€æ©Ÿç³»çµ±ï¼ŒDERR1æ•…éšœä¿¡è™Ÿ' },
            '1C': { desc: 'è®Šé »å™¨UA/DAåŒæ™‚æ”¶åˆ°', level: 'warning', action: 'æª¢æŸ¥è®Šé »å™¨ä¸Šè¡Œ/ä¸‹è¡ŒæŒ‡ä»¤é‚è¼¯' },
            '1D': { desc: 'æ¸›é€Ÿæ™‚é–“è¶…æ™‚', level: 'warning', action: 'æª¢æŸ¥æ¸›é€Ÿåƒæ•¸è¨­å®šï¼ŒMax DCCæ™‚é–“è¨­å®š' },
            '20': { desc: 'LS3å‹•ä½œ', level: 'critical', action: 'ä¸‹çµ‚ç«¯åœæ­¢æ¥µé™é–‹é—œå‹•ä½œï¼Œæª¢æŸ¥é›»æ¢¯ä½ç½®åŠæ¥µé™é–‹é—œ' },
            '21': { desc: 'LS4å‹•ä½œ', level: 'critical', action: 'ä¸Šçµ‚ç«¯åœæ­¢æ¥µé™é–‹é—œå‹•ä½œï¼Œæª¢æŸ¥é›»æ¢¯ä½ç½®åŠæ¥µé™é–‹é—œ' },
            '22': { desc: 'é›»æ¢¯åœ¨æœ€ä¸‹éšï¼ŒLS5æ²’é€²', level: 'critical', action: 'æª¢æŸ¥ä¸‹çµ‚ç«¯éšæ¸›é€Ÿæ¥µé™é–‹é—œLS5' },
            '23': { desc: 'é›»æ¢¯åœ¨æœ€ä¸Šéšï¼ŒLS6æ²’é€²', level: 'critical', action: 'æª¢æŸ¥ä¸Šçµ‚ç«¯éšæ¸›é€Ÿæ¥µé™é–‹é—œLS6' },
            '24': { desc: 'CCRã€A4ã€A10ã€A11ã€TA12ã€P24ã€PAKæ²’é€²', level: 'critical', action: 'æª¢æŸ¥å®‰å…¨è¿´è·¯å„é–‹é—œç‹€æ…‹' },
            '25': { desc: 'é–‹é–€å¤±æ•—>=3æ¬¡', level: 'warning', action: 'æª¢æŸ¥é–‹é–€ç³»çµ±åŠ18DSé–€é–‹åˆ°åº•æª¢çŸ¥é–‹é—œ' },
            '26': { desc: 'é–‹é–€å¤±æ•—ï¼Œ18DSæ²’é€²', level: 'warning', action: 'æª¢æŸ¥é–€é–‹åˆ°åº•æª¢çŸ¥é–‹é—œ18DSåŠé–‹é–€æ©Ÿæ§‹' },
            '27': { desc: 'é—œé–€å¤±æ•—>=3æ¬¡', level: 'warning', action: 'æª¢æŸ¥é—œé–€ç³»çµ±åŠDCRé–€å…¨é—œæª¢çŸ¥é–‹é—œ' },
            '28': { desc: 'é—œé–€å¤±æ•—ï¼ŒDCRæ²’é€²', level: 'warning', action: 'æª¢æŸ¥é–€å…¨é—œæª¢çŸ¥é–‹é—œDCRåŠé—œé–€æ©Ÿæ§‹' },
            '29': { desc: 'DCRã€HDCå‹•ä½œä¸ä¸€è‡´', level: 'warning', action: 'æª¢æŸ¥é–€å…¨é—œé–‹é—œDCRåŠä¹˜å ´é–€å®‰å…¨é–‹é—œHDCé‚è¼¯' },
            '2A': { desc: 'é›»æ¢¯5så…§ï¼Œç§»å‹•è·é›¢<600 pulse', level: 'warning', action: 'æª¢æŸ¥é›»æ¢¯é‹è¡Œé€Ÿåº¦åŠPGè¨ˆæ•¸ç³»çµ±' },
            '2B': { desc: 'é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œè¶…é3æ¬¡æ²’è£œæ­£', level: 'warning', action: 'æª¢æŸ¥é‹¼ç´¢å»¶ä¼¸è£œå„Ÿç³»çµ±WSEåƒæ•¸' },
            '2C': { desc: 'é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œè£œéé ­ï¼Œè£œæ­£é€Ÿåº¦å¤ªå¿«', level: 'warning', action: 'èª¿æ•´é‹¼ç´¢è£œå„Ÿåƒæ•¸ï¼Œæª¢æŸ¥è£œå„Ÿé€Ÿåº¦è¨­å®š' },
            '2D': { desc: 'é‹è½‰ä¸­CPLDçš„C2CCXï¼ŒC2SMRæ²’é€²', level: 'critical', action: 'æª¢æŸ¥CPLDåŸºæ¿åŠå®‰å…¨è¿´è·¯ç‹€æ…‹' },
            '2E': { desc: 'é‹¼ç´¢ä¼¸é•·è£œæ­£ï¼Œå‹•ä½œæ™‚é–“éé•·', level: 'warning', action: 'æª¢æŸ¥WSEè£œå„Ÿæ™‚é–“åƒæ•¸ï¼Œé è¨­20ç§’' },
            '2F': { desc: 'CPFå‹•ä½œ', level: 'warning', action: 'æª¢æŸ¥é–€åè½‰ç³»çµ±CPF' },
            '31': { desc: 'è®Šé »å™¨éé›»æµï¼ŒReset 3æ¬¡', level: 'critical', action: 'æª¢æŸ¥é¦¬é”åŠè®Šé »å™¨ï¼Œç¢ºèªè² è¼‰ç‹€æ³' },
            '32': { desc: 'è®Šé »å™¨éé›»å£“ï¼ŒReset 3æ¬¡', level: 'critical', action: 'æª¢æŸ¥é›»æºé›»å£“åŠè®Šé »å™¨åƒæ•¸' },
            '33': { desc: 'è®Šé »å™¨éè¼‰', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨è² è¼‰åŠæ•£ç†±ç³»çµ±' },
            '34': { desc: 'è®Šé »å™¨éç†±', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨æ•£ç†±é¢¨æ‰‡åŠç’°å¢ƒæº«åº¦' },
            '35': { desc: 'è¶…é€Ÿ', level: 'critical', action: 'æª¢æŸ¥èª¿é€Ÿç³»çµ±åŠå®‰å…¨è£ç½®ï¼Œç«‹å³åœæ­¢é‹è½‰' },
            '36': { desc: 'DC BUSä½é›»å£“æª¢å‡º', level: 'warning', action: 'æª¢æŸ¥ç›´æµæ¯ç·šé›»å£“åŠé›»æºä¾›æ‡‰' },
            '37': { desc: 'å›ç”Ÿé›»é˜»éç†±', level: 'warning', action: 'æª¢æŸ¥å›ç”Ÿé›»é˜»åŠæ•£ç†±ç³»çµ±' },
            '38': { desc: 'è®Šé »å™¨å¤–éƒ¨æ•…éšœ', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨å¤–éƒ¨æ•…éšœè¼¸å…¥ä¿¡è™Ÿ' },
            '39': { desc: 'è®Šé »å™¨ä¸»æ©Ÿæ¿ä¸è‰¯ï¼ŒReset 3æ¬¡', level: 'critical', action: 'æ›´æ›è®Šé »å™¨ä¸»æ©Ÿæ¿' },
            '3A': { desc: 'é¦¬é”éè¼‰ï¼ŒReset 3æ¬¡', level: 'critical', action: 'æª¢æŸ¥é¦¬é”è² è¼‰åŠéè¼‰ä¿è­·è¨­å®š' },
            '3B': { desc: 'IGBTæå£', level: 'critical', action: 'æ›´æ›è®Šé »å™¨IGBTæ¨¡çµ„' },
            '3C': { desc: 'æ¬ ç›¸', level: 'critical', action: 'æª¢æŸ¥ä¸‰ç›¸é›»æºä¾›æ‡‰' },
            '3D': { desc: 'é€Ÿåº¦åå·®éå¤§', level: 'warning', action: 'æª¢æŸ¥é€Ÿåº¦å›é¥‹åŠPGä¿¡è™Ÿ' },
            '3E': { desc: 'PGæ–·ç·š', level: 'critical', action: 'æª¢æŸ¥PGç·¨ç¢¼å™¨æ¥ç·šåŠä¿¡è™Ÿ' },
            '41': { desc: '12Vé›»æºå–ªå¤±', level: 'warning', action: 'æª¢æŸ¥12Vé›»æºä¾›æ‡‰ç³»çµ±' },
            '42': { desc: '12Vé›»æºç¢ºç«‹', level: 'info', action: '12Vé›»æºæ¢å¾©æ­£å¸¸' },
            '43': { desc: 'è½é ‚æ¿é€šè¨Šç•°å¸¸', level: 'warning', action: 'æª¢æŸ¥è½é ‚æ¿é€šè¨Šç·šè·¯' },
            '44': { desc: 'HIDé€šè¨Šç•°å¸¸', level: 'warning', action: 'æª¢æŸ¥HIDé€šè¨Šç³»çµ±' },
            '45': { desc: 'HCAN Reset', level: 'warning', action: 'æª¢æŸ¥HCANé€šè¨Šç³»çµ±' },
            '46': { desc: 'KCAN Reset', level: 'warning', action: 'æª¢æŸ¥KCANé€šè¨Šç³»çµ±' },
            '47': { desc: 'å•Ÿå‹•æ–¹å‘è¢«è®Šé »å™¨åˆ‡æ–·', level: 'warning', action: 'æª¢æŸ¥è®Šé »å™¨RDYã€ZSDä¿¡è™Ÿï¼Œè¶…é5æ¬¡' },
            '59': { desc: 'è®Šé »å™¨39æ•…éšœ', level: 'critical', action: 'åƒè€ƒæ•…éšœç¢¼39è™•ç†æ–¹å¼' },
            'A0': { desc: 'è®Šé »å™¨FHMéŒ¯èª¤', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨FHMåŠŸèƒ½' },
            'A1': { desc: 'è®Šé »å™¨SDO CAN BUSç•°å¸¸', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨CANé€šè¨Šç·šè·¯åŠåƒæ•¸' },
            'A2': { desc: 'watchDOg', level: 'critical', action: 'æª¢æŸ¥ç³»çµ±çœ‹é–€ç‹—åŠŸèƒ½' },
            'A3': { desc: '(ä¿ç•™)', level: 'info', action: 'ä¿ç•™æ•…éšœç¢¼' },
            'A4': { desc: 'åƒæ•¸è¨­å®šCheck SuméŒ¯èª¤', level: 'warning', action: 'é‡æ–°è¨­å®šåƒæ•¸ï¼Œé€£çºŒ3æ¬¡éŒ¯èª¤' },
            'A5': { desc: 'åƒæ•¸æ¨“å±¤éŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥åƒæ•¸Max floorè¨­å®šï¼Œæ‡‰>0ä¸”<=64' },
            'A6': { desc: 'PUç´¯åŠ CPLDæ•¸å€¼é‹ç®—éŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥PUèˆ‡CPLDé€šè¨Š' },
            'A7': { desc: 'CPLDç´¯åŠ PUæ•¸å€¼é‹ç®—éŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥CPLDèˆ‡PUé€šè¨Š' },
            'A8': { desc: 'è®Šé »å™¨SDO CANé€šè¨ŠTimeout', level: 'critical', action: 'æª¢æŸ¥CANé€šè¨Šï¼Œè¶…é30mS' },
            'A9': { desc: 'PRå€¼å¤ªå°', level: 'warning', action: 'æª¢æŸ¥PRåƒæ•¸è¨­å®šï¼Œæ‡‰>=0.001' },
            'AA': { desc: 'RTCéŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥å³æ™‚æ™‚é˜RTCåŠŸèƒ½' },
            'AB': { desc: 'TimeréŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥ç³»çµ±è¨ˆæ™‚å™¨åŠŸèƒ½' },
            'AC': { desc: 'è®Šé »å™¨IDéŒ¯èª¤', level: 'warning', action: 'æª¢æŸ¥è®Šé »å™¨IDè¨­å®š' },
            'AD': { desc: 'è®Šé »å™¨èˆ‡PUæ¨“å±¤ä¸åŒ', level: 'warning', action: 'æª¢æŸ¥è®Šé »å™¨èˆ‡PUæ¨“å±¤åŒæ­¥' },
            'B1': { desc: 'DZNã€LSAã€LSBé‚è¼¯éŒ¯èª¤', level: 'critical', action: 'æª¢æŸ¥é–‹é–€å€åŠå¹³å±¤é–‹é—œé‚è¼¯' },
            'B2': { desc: 'MTHå‹•ä½œ', level: 'critical', action: 'é¦¬é”éç†±ä¿è­·å‹•ä½œï¼Œæª¢æŸ¥æ•£ç†±ç³»çµ±' },
            'B3': { desc: 'åœè»ŠPGèª¤å·®è¶…é200mm', level: 'warning', action: 'æª¢æŸ¥é«˜é€Ÿåœè»Šç²¾åº¦åŠPGè¨ˆæ•¸' },
            'B4': { desc: 'å•Ÿå‹•PGèª¤å·®è¶…é20mm', level: 'warning', action: 'æª¢æŸ¥å•Ÿå‹•ä½ç½®ç²¾åº¦' },
            'BE': { desc: 'é‹è½‰ä¸­ï¼ŒPGè®ŠåŒ–é‡éå°', level: 'warning', action: 'æª¢æŸ¥PGè¨ˆæ•¸ï¼Œ<5 pulse/2secï¼Œ3æ¬¡å¾Œæ­»æ©Ÿ' },
            'BF': { desc: 'åœè»ŠPGè®ŠåŒ–>107mm', level: 'warning', action: 'æª¢æŸ¥åœè»Šç‹€æ…‹PGè®ŠåŒ–ï¼Œ3æ¬¡å¾Œæ­»æ©Ÿ' },
            'C4': { desc: 'è®Šé »å™¨PDO CAN BUS timeout', level: 'critical', action: 'æª¢æŸ¥PDOé€šè¨Šï¼Œä½é€Ÿç«‹å³CUT CCï¼Œé«˜é€Ÿåœè»Šå¾ŒCUT CC' },
            'C5': { desc: 'é‹è½‰ä¸­ï¼ŒDCR off 3æ¬¡', level: 'warning', action: 'æª¢æŸ¥DCRé–€å…¨é—œé–‹é—œï¼Œæ‹‰æ¨“å¹³å¾Œæ­»æ©Ÿ' },
            'C6': { desc: 'è®Šé »å™¨é‹è½‰ä¸­ï¼ŒRUN & RDYæ²’é€å‡º', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨RUNé‹è½‰ä¿¡è™ŸåŠReadyä¿¡è™Ÿ' },
            'C7': { desc: 'é›™å‡ºå…¥å£ï¼Œå‰å¾Œé–€åŒæ™‚æ‰“é–‹', level: 'warning', action: 'æª¢æŸ¥é›™å‡ºå…¥å£é–€æ§é‚è¼¯' },
            'C8': { desc: 'é›™å‡ºå…¥å£ï¼Œé–‹éŒ¯é–€', level: 'warning', action: 'æª¢æŸ¥é›™å‡ºå…¥å£é–‹é–€é‚è¼¯' },
            'C9': { desc: 'é‹è½‰ä¸­ï¼ŒHDC off 3æ¬¡', level: 'warning', action: 'æª¢æŸ¥HDCä¹˜å ´é–€å®‰å…¨é–‹é—œï¼Œæ‹‰æ¨“å¹³å¾Œæ­»æ©Ÿ' },
            'CA': { desc: 'è®Šé »é–€æ©Ÿï¼ŒDERR2', level: 'warning', action: 'æª¢æŸ¥è®Šé »é–€æ©ŸDERR2æ•…éšœï¼Œæœ€å¤šReset 3æ¬¡' },
            'CE': { desc: 'AMC1å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(0.3S)', level: 'critical', action: 'æª¢æŸ¥ä¸»æ¥è§¸å™¨AMC1å‹•ä½œåŠæª¢å‡ºä¿¡è™Ÿ' },
            'CF': { desc: 'AMC2å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(0.3S)', level: 'critical', action: 'æª¢æŸ¥ä¸»æ¥è§¸å™¨AMC2å‹•ä½œåŠæª¢å‡ºä¿¡è™Ÿ' },
            'D2': { desc: 'LS5ï¼ŒLS6å‹•ä½œï¼Œç³»çµ±ä¸æ˜¯åœ¨çµ‚ç«¯æ¨“', level: 'critical', action: 'æª¢æŸ¥çµ‚ç«¯æ¥µé™é–‹é—œLS5/LS6åŠæ¨“å±¤ä½ç½®' },
            'D8': { desc: 'é›»æ¢¯é€Ÿåº¦>æ¸›é€Ÿé–‹é—œä¸‹é™', level: 'critical', action: 'æª¢æŸ¥æ¸›é€Ÿé–‹é—œLS5L/LS7Lè¨­å®šï¼Œæ€¥æ¸›é€Ÿåœè»Šå¾Œæ­»æ©Ÿ' },
            'D9': { desc: 'é›»æ¢¯é€Ÿåº¦>1XL/ZXLæ¥µé™é–‹é—œé€Ÿåº¦', level: 'critical', action: 'æª¢æŸ¥çµ‚ç«¯æ¥µé™é–‹é—œé€Ÿåº¦é™åˆ¶' },
            'DA': { desc: 'é›»æ¢¯é€Ÿåº¦>æ¥µé™é–‹é—œè¨­å®šé€Ÿåº¦', level: 'critical', action: 'æª¢æŸ¥LS5Hã€LS7Hã€DS1~DS8é€Ÿåº¦è¨­å®š' },
            'DB': { desc: 'AMC1å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(2S)', level: 'critical', action: 'æª¢æŸ¥ä¸»æ¥è§¸å™¨AMC1ï¼Œ2ç§’æª¢å‡ºæ™‚é–“' },
            'DC': { desc: 'AMC2å‹•ä½œèˆ‡æª¢å‡ºä¸ä¸€è‡´(2S)', level: 'critical', action: 'æª¢æŸ¥ä¸»æ¥è§¸å™¨AMC2ï¼Œ2ç§’æª¢å‡ºæ™‚é–“' },
            'E0': { desc: 'æ‹‰æ¨“å¹³>3æ¬¡', level: 'warning', action: 'æª¢æŸ¥å¹³å±¤ç³»çµ±åŠLSA/LSBé–‹é—œ' },
            'E3': { desc: 'DCRã€HDCã€18DSé‚è¼¯éŒ¯èª¤', level: 'critical', action: 'æª¢æŸ¥é–€ç³»çµ±é‚è¼¯ï¼Œåˆ‡CCæ­»æ©Ÿ' },
            'E4': { desc: 'é›»æ¢¯é€Ÿåº¦>è¨­å®šä¸Šé™', level: 'critical', action: 'æª¢æŸ¥é€Ÿåº¦ä¸Šé™è¨­å®šINS/WSEï¼ŒæŒçºŒ0.1Sæ€¥æ¸›é€Ÿåœè»Š' },
            'E5': { desc: 'BKXï¼ŒBKXSå‹•ä½œä¸ä¸€è‡´', level: 'critical', action: 'æª¢æŸ¥ç…è»ŠäºŒé‡åŒ–é–‹é—œBKX/BKXSï¼Œ1ç§’ä¸ä¸€è‡´' },
            'E6': { desc: 'Slip', level: 'warning', action: 'æª¢æŸ¥é›»æ¢¯æ»‘ç§»ç‹€æ³' },
            'E7': { desc: 'é›»æ¢¯BKå‹•ä½œèˆ‡BLS2å‹•ä½œä¸ä¸€è‡´', level: 'critical', action: 'æª¢æŸ¥ç…è»Šå‹•ä½œèˆ‡BLS2æª¢çŸ¥é–‹é—œ' },
            'E8': { desc: 'é›»æ¢¯BKå‹•ä½œèˆ‡BLS1å‹•ä½œä¸ä¸€è‡´', level: 'critical', action: 'æª¢æŸ¥ç…è»Šå‹•ä½œèˆ‡BLS1æª¢çŸ¥é–‹é—œ' },
            'E9': { desc: 'æ¨“å¹³é–‹é—œç•°å¸¸', level: 'warning', action: 'æª¢æŸ¥LSAæˆ–LSBæ•…éšœï¼Œåæ–¹å‘æ‹‰æ¨“å¹³' },
            'ED': { desc: 'é‹è½‰ä¸­ï¼ŒPGè®ŠåŒ–é‡ç›¸å', level: 'warning', action: 'æª¢æŸ¥PGè¨ˆæ•¸æ–¹å‘ï¼Œè®ŠåŒ–é‡>20mm' },
            'EE': { desc: 'Door ZoneäºŒé‡åŒ–éŒ¯èª¤', level: 'critical', action: 'æª¢æŸ¥DZX & DZNXé–‹é–€å€é–‹é—œï¼Œ2ç§’ä¸ä¸€è‡´' },
            'EF': { desc: 'DCRäºŒé‡åŒ–éŒ¯èª¤', level: 'critical', action: 'æª¢æŸ¥DCR & DCXé–€å…¨é—œé–‹é—œï¼Œ2ç§’ä¸ä¸€è‡´' },
            'F0': { desc: 'è®Šé »å™¨è¼¸å‡ºèˆ‡PUå‘½ä»¤ä¸ä¸€è‡´', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨è¼¸å‡ºèˆ‡PUæŒ‡ä»¤åŒæ­¥' },
            'F1': { desc: 'æºœè»Šï¼Œè»Šå»‚åœåœ¨æœ€é ‚æ¨“', level: 'critical', action: 'æª¢æŸ¥é ‚æ¨“æºœè»Šç‹€æ³åŠç…è»Šç³»çµ±' },
            'F2': { desc: 'PGå€¼è¶…å‡ºæœ€ä½æœ€é«˜æ¨“å±¤', level: 'critical', action: 'æª¢æŸ¥PGè¨ˆæ•¸ç¯„åœï¼Œè¶…å‡ºPG Over Pulseæ•¸' },
            'F3': { desc: 'è®Šé »å™¨PDO CAN BUS timeout>3æ¬¡', level: 'critical', action: 'æª¢æŸ¥PDOé€šè¨Šï¼ŒC4æ•…éšœ>3æ¬¡æ­»æ©Ÿ' },
            'F5': { desc: 'è®Šé »å™¨é€£çºŒæ•…éšœè¶…é3æ¬¡', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨é€£çºŒæ•…éšœåŸå› ' },
            'F6': { desc: 'invBKæˆ–InvZSDç•°å¸¸', level: 'critical', action: 'æª¢æŸ¥è®Šé »å™¨ç…è»Šä¿¡è™ŸåŠé›¶é€Ÿä¿¡è™Ÿ' },
            'F7': { desc: 'æ‹‰ä¸åˆ°æ¨“å¹³ï¼Œé›»æ¢¯å·²åˆ°é ‚æ¨“', level: 'warning', action: 'æª¢æŸ¥é ‚æ¨“å¹³å±¤ç³»çµ±' },
            'F8': { desc: 'UCMPæ¸¬è©¦ç•°å¸¸', level: 'critical', action: 'æª¢æŸ¥UCMPç…è»Šåˆ¶å‹•åŠ›æ¸¬è©¦' },
            'F9': { desc: '"1C"æ•…éšœ>3æ¬¡', level: 'warning', action: 'åƒè€ƒæ•…éšœç¢¼1Cï¼Œé€£çºŒ3æ¬¡' },
            'FA': { desc: '2Aæ•…éšœ>3æ¬¡', level: 'warning', action: 'åƒè€ƒæ•…éšœç¢¼2Aï¼Œé€£çºŒ3æ¬¡' }
        };

        // Inputä¿¡è™Ÿå®šç¾© (æ ¹æ“šPDFæ–‡ä»¶å®Œæ•´å®šç¾©)
        const inputSignalDefs = {
            'in0': ['LS3', 'LS4', 'LS5', 'LS6', 'LS7', 'LS8', 'DS13', 'DS18'],
            'in1': ['DLS', 'LDSL', 'LSBL', 'LSA', 'LSB', 'WLS1', 'PLU', 'PLD'],
            'in2': ['can.INVin', 'PU568.DSW1', 'PU568.DSW2', 'PU568.TOLSW', 'BLS', 'INSS', 'KNOR', 'CPINS'],
            'in3': ['BKS', 'BKXS', 'AMC1', 'AMC2', 'A4', 'A10', 'A11', 'TA12'],
            'in4': ['Can.Ready', 'Can.RUN+FWD', 'Can.RUN+REV', 'Can.NoR', 'Can.ZSD', 'Can.INS', 'Can.Rescue', 'Can.BKR'],
            'in5': ['Can.Slow', 'FID', 'MTH', 'DZN', 'HDCX', 'DCX', 'DCR', 'CCR'],
            'in6': ['HS.DS1&2', 'HS.DS3&4', 'HS.DS5&6', 'HS.DS7&8', 'HS.DS9&10', 'HS.DS11&12', 'HS.DS13&14', 'HS.DS15&16'],
            'in7': ['PLD.UA', 'PLD.DA', 'PLD.AMC1', 'PLD.AMC2', 'PLD.BK1', 'PLD.BK2', 'PLD.DCX', 'PLD.DCC'],
            'in8': ['PLD.SMR', 'PLD.CCX', 'PLD.ADT', 'Canoff.BKR', 'Canoff.ZSD', 'Canoff.RDY', 'Can.UCMPTest', 'Can.UPSgen'],
            'in9': ['PLD.P24', 'PLD.PUPWRON', 'PLD.WDTOK', 'PLD.OUTENB', 'PLD.RST', 'PLD.INCOK', 'PLD.NOR', 'PLD.INS'],
            'in10': ['PU568.PUSS', 'PU568.PDSS', 'PU568.DOSS', 'PU568.DCSS', 'PU568.BNOR', 'PU568.BINS', 'HS.DS9', 'ZXL(ä¸Š)'],
            'in11': ['Extio.BHDC', 'Extio.BDC', 'Extio.BDCR', 'Extio.BDZNX', 'Extio.BLSC', 'Extio.BDS18', 'Extio.BDLS', 'Extio.BLDS']
        };

        // Outputä¿¡è™Ÿå®šç¾©
        const outputSignalDefs = {
            'out0': ['BK', 'SBK', 'XMC', 'CCX', 'DCC', 'SMR', 'ADT', 'PU568.BINS'],
            'out1': ['LSA&B', 'extFault', 'Creep', 'advanceDT', 'vCANBUSoff', 'FSD', 'FSU', ''],
            'out2': ['', '', '', '', '', '', '', ''],
            'out3': ['Extio.BDT', 'Extio.EMG', 'Extio.ERS', 'Extio.DCCB', 'Extio.Xcut', 'Extio.Ren', 'Extio.FIMreturn', 'Extio.SoftDoorZone']
        };

        // InFlagä¿¡è™Ÿå®šç¾© (è»Ÿé«”ä¿¡è™Ÿç‹€æ…‹)
        const inflagSignalDefs = {
            'inflag0': ['PUF.flag.INS', 'NOR', 'DCN', 'FUSE1', 'PAK', 'XMC2', 'WLS1', 'WLS3'],
            'inflag1': ['LS5/1XL', 'LS6/ZXL', 'WLS8', 'DLYW', 'INS', 'DZN', 'PDT', 'STP'],
            'inflag2': ['LSA/B', 'LSA/B/C', 'DS18', 'AMC2', 'FUSE2', '', '', ''],
            'inflag3': ['SM.RY', 'SM.CPINH', 'SM.A', 'SM.B', 'SM.C', 'SM.D', 'SM.E', 'SM.F'],
            'inflag4': ['SM.canoff', 'SM.CCUTS', 'SM.CarCreep', 'SM.A1', 'SM.A2', 'SM.A3', 'SM.A4', 'SM.A5'],
            'inflag5': ['SM.A6', 'SM.A7', 'SM.A8', 'SM.A9', 'SM.AA', 'SM.AB', 'SM.AC', 'SM.AD'],
            'inflag6': ['EMS.UPOS', 'EMS.LTOS1', 'EMS.LTOS2', 'EMS.DPOS', 'EMS.C2L', 'EMS.PAK', 'EMS.EFS', 'EMS.VIP'],
            'inflag7': ['ELV.ATT', 'ELV.IND', 'ELV.EFS', 'ELV.VIP', 'ELV.HLST', 'ELV.HLDY', 'ELV.C2L', 'ELV.outGP'],
            'inflag8': ['Op.CPINH', 'Op.KCINH', 'Op.HCINH', 'Op.HCPASS', 'Op.RUNINH', 'Op.HLINH', 'Op.WSEINH', 'Op.DLSINH'],
            'inflag9': ['Op.LDSINH', 'Op.DOINH', 'Op.OP1', 'Op.OP3', 'Op.OP4', 'DisOp', 'GenPower', 'FirePass'],
            'inflag10': ['VFCFLROK', 'DLYVFCFLR', 'XMCOFFDLY', 'DIROFFDLY', 'MOREDTS', 'INHH', 'CDOFLV', 'DOF']
        };

        // é—œéµä¿¡è™Ÿå®šç¾©
        const criticalSignals = {
            'input': ['LS3', 'LS4', 'LS5', 'LS6', 'MTH', 'DLS', 'BKS', 'BKXS', 'AMC1', 'AMC2', 'CCR', 'DCR', 'DZN'],
            'output': ['BK', 'SBK', 'extFault', 'CCX', 'DCC'],
            'inflag': ['FUSE1', 'FUSE2', 'PAK', 'SM.A', 'SM.B', 'SM.C', 'SM.D', 'SM.E', 'SM.F']
        };

        // å¯¦æ™‚ç›£æ§è®Šæ•¸
        let realTimeSignalPool = [];
        let realTimeState = {};
        let monitoringActive = false;
        let monitorInterval = null;

        // é é¢è¼‰å…¥æ™‚è¨­ç½®ç¤ºä¾‹æ•¸æ“š
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('faultDate').value = '01/00/00';
            document.getElementById('faultTime').value = '10:24';
            document.getElementById('pgPulse').value = '00010000';
            document.getElementById('currentFloor').value = '1';
            document.getElementById('targetFloor').value = '3';
            document.getElementById('inputSignals').value = 'D7,82,31,FE,BE,30,70,0A,B1,33,53';
            document.getElementById('outputSignals').value = '24,3B,4B,4D,68,C5,2C,11,91,C2,003';
            document.getElementById('inflagSignals').value = '4D,68,C5,2C,11,91,C2,73,72,02,51';
            document.getElementById('systemStatus').value = '00000000:0000,00,0000,00,00,00';
        });

        function analyzeFault() {
            const faultCode = document.getElementById('faultCode').value;
            const faultDate = document.getElementById('faultDate').value;
            const faultTime = document.getElementById('faultTime').value;
            const pgPulse = document.getElementById('pgPulse').value;
            const currentFloor = document.getElementById('currentFloor').value;
            const targetFloor = document.getElementById('targetFloor').value;
            const inputSignals = document.getElementById('inputSignals').value;
            const outputSignals = document.getElementById('outputSignals').value;
            const inflagSignals = document.getElementById('inflagSignals').value;
            const systemStatus = document.getElementById('systemStatus').value;

            // é¡¯ç¤ºçµæœå€åŸŸ
            document.getElementById('resultsSection').style.display = 'block';

            // ç”Ÿæˆæ•…éšœæ¦‚è¦½
            generateFaultOverview(faultCode, faultDate, faultTime, pgPulse, currentFloor, targetFloor);

            // åˆ†æI/Oä¿¡è™Ÿ
            analyzeIOSignals(inputSignals, outputSignals, inflagSignals, systemStatus);

            // æ»¾å‹•åˆ°çµæœå€åŸŸ
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function generateFaultOverview(faultCode, faultDate, faultTime, pgPulse, currentFloor, targetFloor) {
            const faultInfo = faultCodeDescriptions[faultCode] || { desc: 'æœªçŸ¥æ•…éšœ', level: 'warning', action: 'è«‹æŸ¥é–±æ•…éšœç¢¼å°ç…§è¡¨' };
            const levelText = faultInfo.level === 'critical' ? 'åš´é‡' : (faultInfo.level === 'warning' ? 'è­¦å‘Š' : 'è³‡è¨Š');
            const indicatorClass = faultInfo.level === 'critical' ? 'error' : (faultInfo.level === 'warning' ? 'warning' : 'ok');
            
            const overview = `
                <h3>ğŸš¨ æ•…éšœæ¦‚è¦½åˆ†æ</h3>
                <div class="fault-details">
                    <div class="detail-item">
                        <strong>æ•…éšœæ™‚é–“:</strong> ${faultDate || 'æœªæŒ‡å®š'} ${faultTime || ''}
                    </div>
                    <div class="detail-item" style="grid-column: span 2;">
                        <strong>æ•…éšœç¢¼:</strong> ${faultCode} - ${faultInfo.desc}
                    </div>
                    <div class="detail-item">
                        <strong>æ•…éšœç­‰ç´š:</strong>
                        <span class="status-indicator status-${indicatorClass}"></span>${levelText}
                    </div>
                    <div class="detail-item">
                        <strong>ç•¶å‰æ¨“å±¤:</strong> ${currentFloor || 'æœªæŒ‡å®š'}F
                    </div>
                    <div class="detail-item">
                        <strong>ç›®æ¨™æ¨“å±¤:</strong> ${targetFloor || 'æœªæŒ‡å®š'}F
                    </div>
                    <div class="detail-item">
                        <strong>PG Pulse:</strong> ${pgPulse || 'æœªæŒ‡å®š'}
                    </div>
                    <div class="detail-item" style="grid-column: 1/-1;">
                        <strong>å»ºè­°è™•ç†:</strong> ${faultInfo.action}
                    </div>
                </div>
            `;
            
            document.getElementById('faultOverview').innerHTML = overview;
        }

        function analyzeIOSignals(inputSignals, outputSignals, inflagSignals, systemStatus) {
            const ioAnalysisDiv = document.getElementById('ioAnalysis');
            let analysisHTML = '';

            // åˆ†æInputä¿¡è™Ÿ
            if (inputSignals) {
                analysisHTML += generateIOSection('ğŸ”Œ Inputä¿¡è™Ÿç‹€æ…‹', inputSignals, inputSignalDefs, 'input');
            }

            // åˆ†æOutputä¿¡è™Ÿ
            if (outputSignals) {
                analysisHTML += generateIOSection('ğŸ“¤ Outputä¿¡è™Ÿç‹€æ…‹', outputSignals, outputSignalDefs, 'output');
            }

            // åˆ†æInFlagä¿¡è™Ÿ
            if (inflagSignals) {
                analysisHTML += generateIOSection('ğŸ InFlagä¿¡è™Ÿç‹€æ…‹', inflagSignals, inflagSignalDefs, 'inflag');
            }

            // ç³»çµ±ç‹€æ…‹åˆ†æ
            if (systemStatus) {
                analysisHTML += generateSystemStatusSection(systemStatus);
            }

            ioAnalysisDiv.innerHTML = analysisHTML;
        }

        function generateIOSection(title, signalData, signalDefs, type) {
            const signals = signalData.split(',').map(s => s.trim());
            let sectionHTML = `<div class="io-section"><h4>${title}</h4><div class="io-content">`;
            let criticalSignalsFound = [];

            Object.keys(signalDefs).forEach((key, index) => {
                if (index < signals.length) {
                    const hexValue = signals[index];
                    const byteInt = parseInt(hexValue, 16);
                    const binaryValue = isNaN(byteInt) ? '00000000' : byteInt.toString(2).padStart(8, '0');

                    sectionHTML += `
                        <div class="signal-group">
                            <div class="signal-group-header">
                                <span>${key.toUpperCase()} (0x${hexValue})</span>
                                <span>Binary: ${binaryValue}</span>
                            </div>
                            <div class="signal-grid">
                    `;

                    for (let bit = 0; bit < 8; bit++) {
                        const bitValue = binaryValue[bit];
                        const signalName = signalDefs[key][bit] || `Bit${bit}`;
                        const isActive = bitValue === '1';
                        const isCritical = isCriticalSignal(signalName, type);
                        
                        if (isActive && isCritical) {
                            criticalSignalsFound.push(`${signalName}: ç•°å¸¸å‹•ä½œ`);
                        }

                        sectionHTML += `
                            <div class="signal-bit ${isActive ? 'active' : 'inactive'} ${isActive && isCritical ? 'critical' : ''}" 
                                 data-tooltip="${signalName}: ${isActive ? 'ON' : 'OFF'} ${isCritical ? '(é—œéµä¿¡è™Ÿ)' : ''}"
                                 title="${signalName}: ${isActive ? 'ON' : 'OFF'}">
                                ${signalName}
                            </div>
                        `;
                    }

                    sectionHTML += `
                            </div>
                            <div class="signal-description">
                                <strong>ä¿¡è™Ÿå®šç¾©:</strong> ${signalDefs[key].join(', ')}
                            </div>
                        </div>
                    `;
                }
            });

            // æ·»åŠ é—œéµä¿¡è™Ÿè­¦å‘Š
            if (criticalSignalsFound.length > 0) {
                sectionHTML += `
                    <div class="critical-signals">
                        <h5>âš ï¸ é—œéµä¿¡è™Ÿç•°å¸¸</h5>
                        <ul class="critical-list">
                            ${criticalSignalsFound.map(signal => `<li>ğŸ”´ ${signal}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            sectionHTML += '</div></div>';
            return sectionHTML;
        }

        function generateSystemStatusSection(systemStatus) {
            const statusParts = systemStatus.split(':');
            const startPG = statusParts[0] || '00000000';
            const otherStatus = statusParts[[1]](#__1) || '0000,00,0000,00,00,00';
            
            return `
                <div class="io-section">
                    <h4>âš™ï¸ ç³»çµ±ç‹€æ…‹ä¿¡æ¯</h4>
                    <div class="io-content">
                        <div class="signal-group">
                            <div class="signal-group-header">
                                <span>Start PG</span>
                                <span>${startPG}</span>
                            </div>
                            <div class="signal-description">
                                PGèµ·å§‹è¨ˆæ•¸å€¼
                            </div>
                        </div>
                        <div class="signal-group">
                            <div class="signal-group-header">
                                <span>å…¶ä»–ç‹€æ…‹åƒæ•¸</span>
                                <span>${otherStatus}</span>
                            </div>
                            <div class="signal-description">
                                åŒ…å«SYSMç‹€æ…‹ã€è®Šé »å™¨é€Ÿåº¦ã€é‹¼ç´¢è£œå„Ÿæ——æ¨™ã€å¹³å±¤æ——æ¨™ç­‰ç³»çµ±é‹è¡Œåƒæ•¸
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function isCriticalSignal(signalName, type) {
            return criticalSignals[type] && criticalSignals[type].includes(signalName);
        }

        function enhancedAnalyzeFault() {
            // åŸ·è¡ŒåŸºæœ¬åˆ†æ
            analyzeFault();

            // æ·»åŠ å¢å¼·åŠŸèƒ½
            const faultCode = document.getElementById('faultCode').value;
            const inputSignals = document.getElementById('inputSignals').value;
            const outputSignals = document.getElementById('outputSignals').value;

            const faultOverview = document.getElementById('faultOverview');
            const currentHTML = faultOverview.innerHTML;
            
            const enhancedHTML = currentHTML + 
                generateFaultTrendAnalysis(faultCode) +
                generateMaintenanceAdvice(faultCode, inputSignals, outputSignals) +
                generateSafetyAssessment(faultCode);
            
            faultOverview.innerHTML = enhancedHTML;
        }

        function generateFaultTrendAnalysis(faultCode) {
            const trendData = {
                '2C': { frequency: 'high', trend: 'increasing', related: ['2B', '2E', 'WSE'] },
                '11': { frequency: 'critical', trend: 'stable', related: ['E5', 'E7', 'E8', 'BK'] },
                '13': { frequency: 'medium', trend: 'decreasing', related: ['31', '32', '39', 'Ready'] },
                'C4': { frequency: 'high', trend: 'increasing', related: ['A1', 'A8', 'F3', 'CAN'] },
                'B2': { frequency: 'medium', trend: 'stable', related: ['34', '3A', 'MTH'] },
                'E3': { frequency: 'low', trend: 'stable', related: ['25', '27', '29', 'Door'] },
                '35': { frequency: 'low', trend: 'decreasing', related: ['D8', 'D9', 'DA', 'Speed'] }
            };

            const trend = trendData[faultCode];
            if (trend) {
                return `
                    <div class="enhancement-section">
                        <h5>ğŸ“ˆ æ•…éšœè¶¨å‹¢åˆ†æ</h5>
                        <div class="fault-details">
                            <div class="detail-item">
                                <strong>ç™¼ç”Ÿé »ç‡:</strong> ${getTrendText(trend.frequency)}
                            </div>
                            <div class="detail-item">
                                <strong>è¶¨å‹¢:</strong> ${getTrendText(trend.trend)}
                            </div>
                            <div class="detail-item" style="grid-column: span 2;">
                                <strong>ç›¸é—œæ•…éšœ:</strong> ${trend.related.join(', ')}
                            </div>
                        </div>
                    </div>
                `;
            }
            return '';
        }

        function getTrendText(type) {
            const texts = {
                'high': 'é«˜é »ç™¼ç”Ÿ',
                'medium': 'ä¸­é »ç™¼ç”Ÿ',
                'low': 'ä½é »ç™¼ç”Ÿ',
                'critical': 'æ¥µé«˜é »',
                'increasing': 'ä¸Šå‡è¶¨å‹¢ ğŸ“ˆ',
                'stable': 'ç©©å®šç‹€æ…‹ â¡ï¸',
                'decreasing': 'ä¸‹é™è¶¨å‹¢ ğŸ“‰'
            };
            return texts[type] || type;
        }

        function generateMaintenanceAdvice(faultCode, inputSignals, outputSignals) {
            const adviceMap = {
                '2C': [
                    'æª¢æŸ¥é‹¼ç´¢å¼µåŠ›æ˜¯å¦é©ç•¶',
                    'ç¢ºèªé‹¼ç´¢è£œå„Ÿåƒæ•¸è¨­å®š (WSEåƒæ•¸)',
                    'æª¢æŸ¥WSEç³»çµ±é‹ä½œç‹€æ³',
                    'æ¸¬é‡é‹¼ç´¢ä¼¸é•·é‡æ˜¯å¦è¶…æ¨™',
                    'èª¿æ•´è£œå„Ÿé€Ÿåº¦åƒæ•¸'
                ],
                '11': [
                    'ç«‹å³æª¢æŸ¥ç…è»Šç³»çµ±å®‰å…¨æ€§',
                    'ç¢ºèªBLS1/BLS2ç…è»Šæª¢çŸ¥é–‹é—œ',
                    'æª¢æŸ¥ç…è»Šç·šåœˆé›»å£“åŠé›»æµ',
                    'æ¸¬è©¦ç…è»Šåˆ¶å‹•åŠ›æ˜¯å¦è¶³å¤ ',
                    'æª¢æŸ¥ç…è»Šç‰‡ç£¨æç‹€æ³'
                ],
                '13': [
                    'æª¢æŸ¥è®Šé »å™¨Readyä¿¡è™Ÿç·šè·¯',
                    'ç¢ºèªè®Šé »å™¨é›»æºä¾›æ‡‰ç©©å®šæ€§',
                    'æª¢æŸ¥è®Šé »å™¨åƒæ•¸è¨­å®š',
                    'æ¸¬è©¦è®Šé »å™¨é€šè¨ŠåŠŸèƒ½',
                    'æª¢æŸ¥è®Šé »å™¨æ•£ç†±ç³»çµ±'
                ],
                'C4': [
                    'æª¢æŸ¥PDO CANé€šè¨Šç·šè·¯',
                    'ç¢ºèªCANé€šè¨Šåƒæ•¸è¨­å®š',
                    'æª¢æŸ¥CANçµ‚ç«¯é›»é˜»',
                    'æ¸¬è©¦é€šè¨Šé€Ÿç‡è¨­å®š',
                    'æª¢æŸ¥é€šè¨Šç·šè·¯å±è”½'
                ],
                'B2': [
                    'æª¢æŸ¥é¦¬é”æ•£ç†±é¢¨æ‰‡é‹ä½œ',
                    'ç¢ºèªç’°å¢ƒæº«åº¦æ˜¯å¦éé«˜',
                    'æª¢æŸ¥é¦¬é”è² è¼‰æ˜¯å¦æ­£å¸¸',
                    'æ¸…æ½”é¦¬é”æ•£ç†±ç‰‡',
                    'æª¢æŸ¥MTHä¿è­·è¨­å®šå€¼'
                ],
                'E3': [
                    'æª¢æŸ¥DCRé–€å…¨é—œé–‹é—œ',
                    'ç¢ºèªHDCä¹˜å ´é–€å®‰å…¨é–‹é—œ',
                    'æª¢æŸ¥18DSé–€é–‹åˆ°åº•é–‹é—œ',
                    'æ¸¬è©¦é–€ç³»çµ±é‚è¼¯é›»è·¯',
                    'æª¢æŸ¥é–€æ©Ÿæ¢°çµæ§‹'
                ]
            };

            const advice = adviceMap[faultCode] || [
                'è«‹åƒè€ƒæ•…éšœç¢¼å°ç…§è¡¨é€²è¡Œæª¢ä¿®',
                'æª¢æŸ¥ç›¸é—œI/Oä¿¡è™Ÿç‹€æ…‹',
                'ç¢ºèªç³»çµ±åƒæ•¸è¨­å®š',
                'è¯çµ¡æŠ€è¡“æ”¯æ´'
            ];
            
            return `
                <div class="enhancement-section maintenance-advice">
                    <h5>ğŸ”§ ç¶­ä¿®å»ºè­°</h5>
                    <ol>
                        ${advice.map(item => `<li>${item}</li>`).join('')}
                    </ol>
                </div>
            `;
        }

        function generateSafetyAssessment(faultCode) {
            const safetyLevels = {
                'critical': { 
                    level: 'æ¥µå±éšª', 
                    color: '#e74c3c', 
                    action: 'ç«‹å³åœæ­¢é‹è½‰ï¼Œç¦æ­¢è¼‰å®¢',
                    icon: 'ğŸš¨'
                },
                'high': { 
                    level: 'é«˜å±éšª', 
                    color: '#f39c12', 
                    action: 'é™åˆ¶é‹è½‰ï¼ŒåŠ å¼·ç›£æ§',
                    icon: 'âš ï¸'
                },
                'medium': { 
                    level: 'ä¸­ç­‰é¢¨éšª', 
                    color: '#f1c40f', 
                    action: 'æŒçºŒç›£æ§é‹è½‰ç‹€æ³',
                    icon: 'âš¡'
                },
                'low': { 
                    level: 'ä½é¢¨éšª', 
                    color: '#27ae60', 
                    action: 'æ­£å¸¸é‹è½‰ï¼Œå®šæœŸæª¢æŸ¥',
                    icon: 'âœ…'
                }
            };

            let safetyLevel = 'low';
            
            // æ ¹æ“šæ•…éšœç¢¼åˆ¤å®šå®‰å…¨ç­‰ç´š
            const criticalCodes = ['11', '20', '21', '35', 'B2', 'E3', '24', '19', '3E', 'CE', 'CF'];
            const highCodes = ['13', '31', '2C', 'C4', 'A1', 'F2', 'E5', 'E7', 'E8'];
            const mediumCodes = ['12', '25', '27', '2A', '2B', 'A4', 'A5', 'B3', 'B4'];
            
            if (criticalCodes.includes(faultCode)) {
                safetyLevel = 'critical';
            } else if (highCodes.includes(faultCode)) {
                safetyLevel = 'high';
            } else if (mediumCodes.includes(faultCode)) {
                safetyLevel = 'medium';
            }

            const safety = safetyLevels[safetyLevel];
            
            return `
                <div class="enhancement-section" style="border-left: 4px solid ${safety.color};">
                    <h5>ğŸ›¡ï¸ å®‰å…¨è©•ä¼°</h5>
                    <div class="fault-details">
                        <div class="detail-item">
                            <strong>é¢¨éšªç­‰ç´š:</strong> 
                            <span style="color: ${safety.color}; font-weight: bold;">${safety.icon} ${safety.level}</span>
                        </div>
                        <div class="detail-item" style="grid-column: span 2;">
                            <strong>å»ºè­°å‹•ä½œ:</strong> ${safety.action}
                        </div>
                    </div>
                </div>
            `;
        }

        // å¯¦æ™‚ç›£æ§åŠŸèƒ½
        function buildRealTimeSignalPool() {
            const collect = new Set();
            [inputSignalDefs, outputSignalDefs, inflagSignalDefs].forEach(group => {
                Object.values(group).forEach(arr => {
                    arr.forEach(sig => { 
                        if (sig && sig.trim() && sig !== '') {
                            collect.add(sig);
                        }
                    });
                });
            });
            
            // è£œå……å¸¸ç”¨é—œéµä¿¡è™Ÿ
            ['Ready', 'ZSD', 'BK', 'SBK', 'DCR', 'HDC', '18DS', 'CAN', 'PDO', 'FUSE1', 'FUSE2', 'AMC1', 'AMC2'].forEach(s => collect.add(s));
            
            realTimeSignalPool = Array.from(collect).sort();
            realTimeSignalPool.forEach(sig => { 
                realTimeState[sig] = Math.random() > 0.7; 
            });
        }

        function startRealTimeMonitoring() {
            if (monitoringActive) return;
            monitoringActive = true;
            buildRealTimeSignalPool();

            const container = document.getElementById('ioAnalysis');
            const monitorDiv = document.createElement('div');
            monitorDiv.className = 'real-time-monitor';
            monitorDiv.id = 'realTimeMonitor';
            monitorDiv.innerHTML = `
                <h4>ğŸ“¡ å¯¦æ™‚ä¿¡è™Ÿç›£æ§</h4>
                <div class="monitor-controls" style="margin-bottom:15px;">
                    <button class="btn btn-success" onclick="toggleAllSignals(true)">ğŸŸ¢ å…¨éƒ¨ ON</button>
                    <button class="btn btn-warning" onclick="toggleAllSignals(false)">ğŸ”´ å…¨éƒ¨ OFF</button>
                    <button class="btn btn-danger" onclick="stopMonitoring()">â¹ï¸ åœæ­¢ç›£æ§</button>
                    <button class="btn" onclick="exportCurrentSignals()">ğŸ“„ åŒ¯å‡ºç‹€æ…‹</button>
                </div>
                <div class="rt-grid" id="rtGrid"></div>
                <div style="font-size:12px;color:#666;text-align:center;margin-top:10px;">
                    ğŸŸ¢ ç¶ è‰²=ON  / âšª ç°è‰²=OFF  / ğŸ”´ ç´…è‰²=é—œéµä¿¡è™ŸON
                </div>
            `;
            container.appendChild(monitorDiv);

            const grid = monitorDiv.querySelector('#rtGrid');
            grid.innerHTML = realTimeSignalPool.map(sig => {
                const isCritical = isCriticalSignal(sig, 'input') || isCriticalSignal(sig, 'output') || isCriticalSignal(sig, 'inflag');
                return `
                    <div class="rt-signal ${realTimeState[sig] ? 'on' : 'off'} ${isCritical ? 'critical' : ''}" 
                         data-signal="${sig}" 
                         title="${sig} - ${realTimeState[sig] ? 'ON' : 'OFF'} ${isCritical ? '(é—œéµä¿¡è™Ÿ)' : ''}"
                         onclick="toggleSignal('${sig}')">${sig}</div>
                `;
            }).join('');

            monitorInterval = setInterval(simulateSignalFluctuation, 2000);
        }

        function simulateSignalFluctuation() {
            const flipCount = Math.floor(3 + Math.random() * 8);
            for (let i = 0; i < flipCount; i++) {
                const sig = realTimeSignalPool[Math.floor(Math.random() * realTimeSignalPool.length)];
                realTimeState[sig] = !realTimeState[sig];
                updateRealTimeSignalElement(sig);
            }
        }

        function updateRealTimeSignalElement(sig) {
            const el = document.querySelector(`.rt-signal[data-signal="${sig}"]`);
            if (!el) return;
            el.classList.toggle('on', realTimeState[sig]);
            el.classList.toggle('off', !realTimeState[sig]);
            el.title = `${sig} - ${realTimeState[sig] ? 'ON' : 'OFF'} ${el.classList.contains('critical') ? '(é—œéµä¿¡è™Ÿ)' : ''}`;
        }

        function toggleSignal(sig) {
            realTimeState[sig] = !realTimeState[sig];
            updateRealTimeSignalElement(sig);
        }

        function toggleAllSignals(state) {
            realTimeSignalPool.forEach(sig => {
                realTimeState[sig] = state;
                updateRealTimeSignalElement(sig);
            });
        }

        function stopMonitoring() {
            monitoringActive = false;
            if (monitorInterval) clearInterval(monitorInterval);
            const div = document.getElementById('realTimeMonitor');
            if (div) div.remove();
        }

        function exportCurrentSignals() {
            const onSignals = realTimeSignalPool.filter(sig => realTimeState[sig]);
            const offSignals = realTimeSignalPool.filter(sig => !realTimeState[sig]);
            const criticalOnSignals = onSignals.filter(sig => 
                isCriticalSignal(sig, 'input') || isCriticalSignal(sig, 'output') || isCriticalSignal(sig, 'inflag')
            );
            
            const content = [
                '=== é›»æ¢¯å¯¦æ™‚ä¿¡è™Ÿç‹€æ…‹å¿«ç…§ ===',
                `åŒ¯å‡ºæ™‚é–“: ${new Date().toLocaleString()}`,
                '',
                `ç¸½ä¿¡è™Ÿæ•¸: ${realTimeSignalPool.length}`,
                `ONä¿¡è™Ÿæ•¸: ${onSignals.length}`,
                `OFFä¿¡è™Ÿæ•¸: ${offSignals.length}`,
                `é—œéµä¿¡è™ŸON: ${criticalOnSignals.length}`,
                '',
                '=== ONç‹€æ…‹ä¿¡è™Ÿ ===',
                ...onSignals.map(sig => `âœ… ${sig}`),
                '',
                '=== OFFç‹€æ…‹ä¿¡è™Ÿ ===',
                ...offSignals.map(sig => `âŒ ${sig}`),
                '',
                '=== é—œéµä¿¡è™ŸON (éœ€æ³¨æ„) ===',
                ...criticalOnSignals.map(sig => `ğŸš¨ ${sig}`)
            ].join('\n');
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `é›»æ¢¯ä¿¡è™Ÿç‹€æ…‹_${new Date().toISOString().slice(0,16).replace('T', '_')}.txt`;
            a.click();
            setTimeout(() => URL.revokeObjectURL(a.href), 1000);
        }

        function generateFaultReport() {
            const faultCode = document.getElementById('faultCode').value;
            const faultDate = document.getElementById('faultDate').value;
            const faultTime = document.getElementById('faultTime').value;
            const currentFloor = document.getElementById('currentFloor').value;
            const targetFloor = document.getElementById('targetFloor').value;
            const pgPulse = document.getElementById('pgPulse').value;
            const inputSignals = document.getElementById('inputSignals').value;
            const outputSignals = document.getElementById('outputSignals').value;
            const inflagSignals = document.getElementById('inflagSignals').value;
            const systemStatus = document.getElementById('systemStatus').value;
            
            const faultInfo = faultCodeDescriptions[faultCode] || { desc: 'æœªçŸ¥æ•…éšœ', level: 'warning', action: 'è«‹æŸ¥é–±ç¶­ä¿®æ‰‹å†Š' };
            
            const reportContent = [
                '========================================',
                '        é›»æ¢¯æ•…éšœåˆ†æå ±å‘Š',
                '        PU568 OBM ç³»çµ±',
                '========================================',
                '',
                'ã€åŸºæœ¬ä¿¡æ¯ã€‘',
                `æ•…éšœæ™‚é–“: ${faultDate} ${faultTime}`,
                `æ•…éšœç¢¼: ${faultCode}`,
                `æ•…éšœæè¿°: ${faultInfo.desc}`,
                `æ•…éšœç­‰ç´š: ${faultInfo.level === 'critical' ? 'åš´é‡' : faultInfo.level === 'warning' ? 'è­¦å‘Š' : 'è³‡è¨Š'}`,
                `ç•¶å‰æ¨“å±¤: ${currentFloor}F`,
                `ç›®æ¨™æ¨“å±¤: ${targetFloor}F`,
                `PG Pulse: ${pgPulse}`,
                '',
                'ã€I/Oä¿¡è™Ÿç‹€æ…‹ã€‘',
                `Inputä¿¡è™Ÿ: ${inputSignals}`,
                `Outputä¿¡è™Ÿ: ${outputSignals}`,
                `InFlagä¿¡è™Ÿ: ${inflagSignals}`,
                `ç³»çµ±ç‹€æ…‹: ${systemStatus}`,
                '',
                'ã€ç¶­ä¿®å»ºè­°ã€‘',
                faultInfo.action,
                '',
                'ã€æ³¨æ„äº‹é …ã€‘',
                '1. è«‹åœ¨ç¢ºä¿å®‰å…¨çš„å‰æä¸‹é€²è¡Œæª¢ä¿®',
                '2. æª¢ä¿®å‰è«‹åˆ‡æ–·é›»æºä¸¦æ›ç‰Œä¸Šé–',
                '3. æª¢ä¿®å¾Œè«‹é€²è¡ŒåŠŸèƒ½æ¸¬è©¦',
                '4. è¨˜éŒ„æª¢ä¿®éç¨‹å’Œçµæœ',
                '',
                `å ±å‘Šç”Ÿæˆæ™‚é–“: ${new Date().toLocaleString()}`,
                'å ±å‘Šç”Ÿæˆç³»çµ±: é›»æ¢¯æ•…éšœI/Oç‹€æ…‹åˆ†æç³»çµ±',
                '========================================'
            ].join('\n');
            
            const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `é›»æ¢¯æ•…éšœå ±å‘Š_${faultCode}_${new Date().toISOString().slice(0,10)}.txt`;
            a.click();
            setTimeout(() => URL.revokeObjectURL(a.href), 1000);
        }
    </script>
</body>
</html>


